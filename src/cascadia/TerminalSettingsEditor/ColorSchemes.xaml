<!-- Copyright (c) Microsoft Corporation. All rights reserved. Licensed under
the MIT License. See LICENSE in the project root for license information. -->
<Page
    x:Class="Microsoft.Terminal.Settings.Editor.ColorSchemes"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Microsoft.Terminal.Settings.Editor"
    xmlns:model="using:Microsoft.Terminal.Settings.Model"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="clr-namespace:Windows.UI.Xaml.Controls;assembly=Windows.Foundation.UniversalApiContract" xmlns:Windows10version1809="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract, 7)"
    mc:Ignorable="d">


    <Page.Resources>
        <Style TargetType="StackPanel">
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>

        <Style TargetType="Button">
            <Setter Property="BorderBrush" Value="{StaticResource SystemBaseLowColor}"/>
            <Setter Property="Height" Value="37" />
            <Setter Property="Width" Value="37" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="Margin" Value="10,22,0,0" />
            <Setter Property="CornerRadius" Value="2"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Width" Value="100"/>
            <Setter Property="FontSize" Value="15"/>
        </Style>

        <Style TargetType="ColorPicker">
            <Setter Property="IsColorSliderVisible" Value="False"/>
            <Setter Property="IsColorChannelTextInputVisible" Value="False"/>
            <Setter Property="IsHexInputVisible" Value="False"/>
            <Setter Property="IsAlphaSliderVisible" Value="True"/>
            <Setter Property="IsAlphaTextInputVisible" Value="True"/>
        </Style>

        <local:ColorToHexConverter x:Key="ColorToHexConverter"/>
    </Page.Resources>

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <TextBlock x:Uid="ColorScheme_ColorSchemes"
                Style="{StaticResource SubheaderTextBlockStyle}"
                Margin="0,0,0,20"
                Grid.Row="0" />

        <StackPanel Grid.Row="1"
                    Grid.Column="0">
            <ComboBox x:Name="ColorSchemeComboBox"
                    SelectedIndex="0"
                    ItemsSource="{x:Bind ColorSchemeList, Mode=OneWay}"
                    SelectionChanged="ColorSchemeSelectionChanged" Width="160">
            </ComboBox>
        </StackPanel>

        <ScrollViewer Grid.Row="2"
                      Grid.Column="0">
            <ItemsControl x:Name="ColorTableControl"
                            ItemsSource="{x:Bind CurrentColorTable, Mode=TwoWay}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate x:DataType="local:ColorTableEntry">
                        <StackPanel Orientation="Horizontal">
                            <TextBox Header="{x:Bind Name, Mode=OneWay}"
                                        Text="{x:Bind Color, Converter={StaticResource ColorToHexConverter}, Mode=OneWay}"
                                        Tag="{x:Bind Index, Mode=OneWay}"
                                        HorizontalAlignment="Left"
                                        GotFocus="TextBoxGotFocus"
                                        LostFocus="TextBoxLostFocus"/>
                            <Button Background="{x:Bind local:ColorSchemes.ColorToBrush(Color), Mode=OneWay}">
                                <Button.Flyout>
                                    <Flyout>
                                        <ColorPicker Tag="{x:Bind Index, Mode=TwoWay}"
                                                        Color="{x:Bind Color, Mode=TwoWay}"
                                                        ColorChanged="ColorPickerChanged"/>
                                    </Flyout>
                                </Button.Flyout>
                            </Button>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <ScrollViewer Grid.Row="2"
                      Grid.Column="1">
            <ItemsControl>
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Uid="ColorScheme_Foreground"
                             Text="{x:Bind CurrentColorScheme.Foreground, Converter={StaticResource ColorToHexConverter}, Mode=OneWay}"
                             HorizontalAlignment="Left"
                             Tag="Foreground"
                             GotFocus="TextBoxGotFocus"
                             LostFocus="TextBoxLostFocus"/>
                    <Button Background="{x:Bind local:ColorSchemes.ColorToBrush(CurrentColorScheme.Foreground), Mode=OneWay}">
                        <Button.Flyout>
                            <Flyout>
                                <ColorPicker Color="{x:Bind CurrentColorScheme.Foreground, Mode=TwoWay}" />
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Uid="ColorScheme_Background"
                             Text="{x:Bind CurrentColorScheme.Background, Converter={StaticResource ColorToHexConverter}, Mode=OneWay}"
                             HorizontalAlignment="Left"
                             Tag="Background"
                             GotFocus="TextBoxGotFocus"
                             LostFocus="TextBoxLostFocus"/>
                    <Button Background="{x:Bind local:ColorSchemes.ColorToBrush(CurrentColorScheme.Background), Mode=OneWay}">
                        <Button.Flyout>
                            <Flyout>
                                <ColorPicker Color="{x:Bind CurrentColorScheme.Background, Mode=TwoWay}" />
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Uid="ColorScheme_CursorColor"
                             Text="{x:Bind CurrentColorScheme.CursorColor, Converter={StaticResource ColorToHexConverter}, Mode=OneWay}"
                             HorizontalAlignment="Left"
                             Tag="CursorColor"
                             GotFocus="TextBoxGotFocus"
                             LostFocus="TextBoxLostFocus"/>
                    <Button Background="{x:Bind local:ColorSchemes.ColorToBrush(CurrentColorScheme.CursorColor), Mode=OneWay}">
                        <Button.Flyout>
                            <Flyout>
                                <ColorPicker Color="{x:Bind CurrentColorScheme.CursorColor, Mode=TwoWay}" />
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Uid="ColorScheme_SelectionBackground"
                             Text="{x:Bind CurrentColorScheme.SelectionBackground, Converter={StaticResource ColorToHexConverter}, Mode=OneWay}"
                             HorizontalAlignment="Left"
                             Tag="SelectionBackground"
                             GotFocus="TextBoxGotFocus"
                             LostFocus="TextBoxLostFocus"/>
                    <Button Background="{x:Bind local:ColorSchemes.ColorToBrush(CurrentColorScheme.SelectionBackground), Mode=OneWay}">
                        <Button.Flyout>
                            <Flyout>
                                <ColorPicker Color="{x:Bind CurrentColorScheme.SelectionBackground, Mode=TwoWay}" />
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
